% This file managed by Puppet
% Template Path: <%= @module_name %>/templates/rabbitmq/ssl-dist.conf
[{server,
  [{certfile, "<%= @tls_certfile %>"},
   {keyfile, "<%= @tls_keyfile %>"},
   {cacertfile, "<%= @rabbitmq_cacert %>"},
   {verify, <%= @verify_server_peer %>},
<%- if @inter_node_ciphers and @inter_node_ciphers != '' -%>
   {server_ciphers, "<%= @inter_node_ciphers %>"},
<%- end -%>
   {versions, [<%= @ssl_versions.sort.map { |v| "'#{v}'" }.join(', ') %>]},
   {secure_renegotiate, true}
  ]},
 {client,
  [{cacertfile, "<%= @rabbitmq_cacert %>"},
   {verify, <%= @verify_client_peer %>},
   {secure_renegotiate, true},
   {versions, [<%= @ssl_versions.sort.map { |v| "'#{v}'" }.join(', ') %>]}
  ]}
].
% EOF
